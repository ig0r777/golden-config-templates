{#
  Cisco QoS Policy Configuration Template
  
  This template implements a comprehensive QoS configuration matching
  the Juniper ASLAN standard for traffic prioritization on Cisco IOS devices.
  
  Variables:
  - qos_enable: Enable QoS configuration (default: true)
  - qos_profile: QoS profile name (default: "ASLAN")
  - trust_dscp: Enable DSCP trust on interfaces (default: true)
  
  Traffic Classes (matching Juniper CoS):
  1. NC (Network Control) - Voice/Network control
  2. EF (Expedited Forwarding) - Voice traffic
  3. AF41 (Assured Forwarding) - Video traffic  
  4. AF31 (Assured Forwarding) - Business apps
  5. AF11 (Assured Forwarding) - Standard traffic
  6. BE (Best Effort) - Background traffic
#}
{%- set qos_enable = qos_enable | default(true) -%}
{%- set qos_profile = qos_profile | default("ASLAN") -%}
{%- set trust_dscp = trust_dscp | default(true) -%}

{%- if qos_enable %}
!
! === QoS Configuration - {{ qos_profile }} Profile ===
!
! Class Maps for Traffic Classification
!
class-map match-any NC-CLASS
 description Network Control Traffic
 match dscp cs6
 match dscp cs7
!
class-map match-any EF-CLASS
 description Expedited Forwarding - Voice
 match dscp ef
!
class-map match-any AF41-CLASS  
 description Assured Forwarding 41 - Video
 match dscp af41
 match dscp af42
 match dscp af43
!
class-map match-any AF31-CLASS
 description Assured Forwarding 31 - Business Apps
 match dscp af31
 match dscp af32
 match dscp af33
!
class-map match-any AF11-CLASS
 description Assured Forwarding 11 - Standard
 match dscp af11
 match dscp af12
 match dscp af13
!
class-map match-any DSCP15-CLASS
 description Custom DSCP 15 Traffic
 match dscp 15
!
class-map match-any BE-CLASS
 description Best Effort Traffic
 match dscp default
!
!
! Policy Map for QoS Implementation
!
policy-map {{ qos_profile }}-POLICY
 description {{ qos_profile }} QoS Policy matching Juniper CoS
 !
 class NC-CLASS
  priority percent 5
  set dscp cs6
 !
 class EF-CLASS  
  priority percent 20
  set dscp ef
 !
 class AF41-CLASS
  bandwidth percent 15
  queue-limit 75 packets
  random-detect dscp-based
  set dscp af41
 !
 class AF31-CLASS
  bandwidth percent 30  
  queue-limit 100 packets
  random-detect dscp-based
  set dscp af31
 !
 class DSCP15-CLASS
  bandwidth percent 10
  set dscp 15
 !
 class AF11-CLASS
  bandwidth percent 10
  random-detect dscp-based
  set dscp af11
 !
 class BE-CLASS
  bandwidth percent 10
  random-detect dscp-based
  set dscp default
 !
 class class-default
  fair-queue
  random-detect
!
{%- if trust_dscp %}
!
! QoS Interface Template for DSCP Trust
! Apply this to interfaces using: service-policy input {{ qos_profile }}-POLICY
!
! Example interface configuration:
! interface GigabitEthernet0/1
!  mls qos trust dscp
!  service-policy input {{ qos_profile }}-POLICY  
!  service-policy output {{ qos_profile }}-POLICY
!
{%- endif %}
!
! === End QoS Configuration ===
!
{%- endif %}